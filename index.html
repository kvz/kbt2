<!DOCTYPE html>
<html manifest="manifest.appcache">
<!--
    Offline support

    Please make your homework before doing this:
        http://www.alistapart.com/articles/application-cache-is-a-douchebag/
        http://appcachefacts.info

    This might be necessary to set up on your server, to make sure
    files are updated when the appcache file itself is:
        https://github.com/robnyman/Firefox-OS-Boilerplate-App/blob/gh-pages/.htaccess
 -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" type="text/css" href="css/base.css">
    <link rel="stylesheet" type="text/css" href="css/headers.css">
    <link rel="stylesheet" type="text/css" href="css/buttons.css">
    <link rel="stylesheet" type="text/css" href="css/toolbars.css">
    <link rel="stylesheet" type="text/css" href="css/webapp.css">
    <title>kbt2</title>
</head>

<body class="skin-dark">

    <section role="region">
        <header>
            <!-- Icon that will indicate whether you are online or offline - enabled if you are using offline/appcache (see above) -->
            <!-- <div id="online-status" title="Online"></div> -->
            <menu type="toolbar">
                <button data-seconds="30"  class="interval">30s</button>
                <button id="install"><span class="icon icon-add">add</span></button>
                <button data-seconds="60"  class="interval">1m</button>
                <button data-seconds="120" class="interval">2m</button>
                <button data-seconds="180" class="interval">3m</button>
                <button class="counter">Loading</button>
            </menu>
          <!--   <h1>
                kbt2
            </h1> -->
        </header>
    </section>

    <div id="main">
        <p class="top-bar-placeholder">
            topbar placeholder
        </p>
        <p id="installation-instructions">
            Press the + button in the top right corner to install this app.
        </p>
        <div id="lesson">Loading...</div>
        <ul>
          <li><a href="/lessons/lesson5.md" class="load-markdown">Lesson 5</li>
          <li><a href="/lessons/lesson6.md" class="load-markdown">Lesson 6</li>
          <li><a href="/lessons/lesson7.md" class="load-markdown">Lesson 7</li>
          <li><a href="/lessons/lesson8.md" class="load-markdown">Lesson 8</li>
        </ul>
    </div>

    <script type="text/javascript" src="js/marked.js"></script>
    <script type="text/javascript" src="js/base.js"></script>
    <script type="text/javascript" src="js/stopwatch.js"></script>
    <script type="text/javascript" src="js/offline.js"></script>
    <script type="text/javascript">
        (function () {
          // Instantiate new objects with 'new'
          var stopwatch = new Stopwatch({
            "milliStep": 500,
            "fadeFactor": 0.6,
            "elements": {
                "body"     : document.querySelector('body'),
                "counter"  : document.querySelector('button.counter'),
                "lesson"   : document.querySelector('#lesson'),
                "intervals": document.querySelectorAll('button.interval'),
            }
          });

          // Invoke methods like this
          stopwatch.bind();
          stopwatch.loadConfig(function(err, config) {
            stopwatch.loadMarkdown(config.markdown_index);
          });

          [].forEach.call(document.querySelectorAll('.load-markdown'), function(el) {
            el.onclick = function () {
              var href = el.getAttribute('href');
              stopwatch.loadMarkdown(href);
              return false;
            };
          });

          // Main
          if ('mozLockOrientation' in screen) {
            var portraitLock = screen.mozLockOrientation('portrait-primary');
            if (portraitLock) {
              console.log('locked to portrait');
            } else {
              console.log('Unable to lock orientation');
            }
          }

          window.addEventListener("focus", function(event) {
            if ('mozLockOrientation' in screen) {
              var portraitLock = screen.mozLockOrientation('portrait-primary');
              if (portraitLock) {
                console.log('locked to portrait');
              }
            }
          }, false);

        })();
    </script>
</body>
</html>
